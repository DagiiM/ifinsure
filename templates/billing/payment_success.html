{% extends 'base.html' %}
{% load humanize %}

{% block title %}Payment Successful - ifinsure{% endblock %}

{% block content %}
<div class="result-container">
    <div class="result-card success">
        <div class="result-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="40" height="40">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </div>
        <h1 class="result-title">Payment Successful</h1>
        <p class="result-subtitle">Your payment has been processed successfully</p>
        
        <div class="result-details">
            <div class="detail-row">
                <span class="detail-label">Amount Paid</span>
                <span class="detail-value amount">KES {{ payment.amount|intcomma }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Reference</span>
                <span class="detail-value">{{ payment.payment_reference }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Invoice</span>
                <span class="detail-value">{{ payment.invoice.invoice_number }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Date</span>
                <span class="detail-value">{{ payment.payment_date|date:"M d, Y H:i" }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Method</span>
                <span class="detail-value">{{ payment.get_payment_method_display }}</span>
            </div>
        </div>
        
        <div class="result-actions">
            <a href="{% url 'billing:invoice_detail' payment.invoice.pk %}" class="primary-btn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="18" height="18">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                View Invoice
            </a>
            <a href="{% url 'billing:invoices' %}" class="secondary-btn">All Invoices</a>
        </div>
        
        <p class="result-note">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="14" height="14">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            A confirmation email has been sent to your registered email address.
        </p>
    </div>
</div>

<style>
.result-container {
    min-height: 70vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
}

.result-card {
    background: white;
    border-radius: 24px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    padding: 3rem 2.5rem;
    text-align: center;
    max-width: 480px;
    width: 100%;
}

.result-card.success {
    border-top: 4px solid #22c55e;
}

.result-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #16a34a;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
}

.result-title {
    font-size: 1.75rem;
    font-weight: 800;
    color: var(--color-gray-900);
    margin: 0 0 0.5rem;
}

.result-subtitle {
    color: var(--color-gray-600);
    margin: 0 0 2rem;
}

.result-details {
    background: var(--color-gray-50);
    border-radius: 16px;
    padding: 1.25rem;
    margin-bottom: 2rem;
    text-align: left;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    padding: 0.625rem 0;
    border-bottom: 1px solid var(--color-gray-200);
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: var(--color-gray-500);
    font-size: 0.9rem;
}

.detail-value {
    font-weight: 600;
    color: var(--color-gray-900);
    font-size: 0.9rem;
}

.detail-value.amount {
    color: #16a34a;
    font-weight: 700;
}

.result-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.primary-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, var(--color-primary-600) 0%, var(--color-primary-700) 100%);
    color: white;
    border-radius: 10px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.15s;
}

.primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.secondary-btn {
    padding: 0.75rem 1.5rem;
    background: var(--color-gray-100);
    color: var(--color-gray-700);
    border-radius: 10px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.15s;
}

.secondary-btn:hover {
    background: var(--color-gray-200);
}

.result-note {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--color-gray-500);
    margin: 0;
}
</style>
{% endblock %}
